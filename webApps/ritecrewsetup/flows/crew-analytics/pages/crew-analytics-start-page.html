<!-- <oj-vb-fragment id="page-header" bridge="[[vbBridge]]" name="page-header">
  <oj-vb-fragment-param name="title" value="Crew Analytics"></oj-vb-fragment-param>
  <template slot="actions">
  </template>
</oj-vb-fragment> -->


<oj-sp-welcome-page id="oj-sp-wp1" illustration-background="[[ require.toUrl($page.variables.illustrationBackground) ]]"
  illustration-foreground="[[ require.toUrl($page.variables.illustrationForeground) ]]"
  display-options.image-stretch="[[ $page.variables.imageStretch ]]"
  display-options.mobile-image="[[ $page.variables.mobileImage ]]" display-options.responsive-padding="on"
  page-title="Crew Analytics" background-color="dark-pebble">
  <div class="oj-flex oj-panel" style="margin-top:-48px">

    <div class="oj-flex-item oj-sm-flex-initial  oj-md-3 oj-sm-3"
      style="max-height:90vh;background-color:#faf9f9;box-shadow:5px 5px 5px #f1f1f1">
      <oj-chart type="pie" class="oj-sm-flex-initial" style="height:40vh" animation-on-display="auto"
        style-defaults.three-d-effect="on" data="[[ $variables.ChartADP ]]">
        <template slot='itemTemplate' data-oj-as='item'>
          <oj-chart-item value='[[item.data.value]]' group-id='[[[item.data.group] ]]' series-id='[[item.data.series]]'>
          </oj-chart-item>
        </template>
      </oj-chart>
      <demo-chart-three-d-effect-control id="threeDControl" three-d-effect="on" aria-controls="pieChart">
      </demo-chart-three-d-effect-control>

      <oj-chart type="bar" class="oj-sm-flex-initial" style="height:40vh" animation-on-display="auto"
        style-defaults.three-d-effect="on" data="[[ $variables.ChartADP ]]">
        <template slot='itemTemplate' data-oj-as='item'>
          <oj-chart-item value='[[item.data.value]]' group-id='[[[item.data.group] ]]' series-id='[[item.data.series]]'>
          </oj-chart-item>
        </template>
      </oj-chart>
      <demo-chart-three-d-effect-control id="threeDControl" three-d-effect="on" aria-controls="pieChart">
      </demo-chart-three-d-effect-control>
      </oj-chart>

    </div>
    <div class="oj-flex-item oj-sm-flex-initial oj-md-9 oj-sm-9" style="max-height:90vh;box-shadow:5px 5px 5px #f1f1f1">
      <div class="oj-flex-item">
        <oj-validation-group id="searchgroup" >
          <oj-form-layout columns="5" max-columns="5" label-edge="top" style="margin-left:-2vw">
            <oj-select-single label-hint="Report" value="{{ $variables.searchObj.report }}"
              data="[[ $variables.reportADP ]]">
            </oj-select-single>
            <oj-select-single label-hint="Crew Name" item-text="crew_name" value="{{ $variables.searchObj.crewName }}"
              data="[[$variables.getGetCustomerDetailsListSDP]]"></oj-select-single>
            <oj-select-single label-hint="Resource Name" value="{{ $variables.searchObj.name }}"
              item-text="resource_name" data="[[ $variables.ResourceADP ]]"></oj-select-single>
            <oj-input-date label-hint="Start Date"
              converter='{"type": "datetime", "options": {"pattern":"dd-MMM-yyyy"}}'
              value="{{ $variables.searchObj.from_date }}">
            </oj-input-date>
            <oj-input-date label-hint="End Date" value="{{ $variables.searchObj.to_date }}"
              converter='{"type": "datetime", "options": {"pattern":"dd-MMM-yyyy"}}'></oj-input-date>
          </oj-form-layout>
        </oj-validation-group>

        <oj-toolbar chroming="solid">
          <oj-button label="Search" chroming="callToAction" class="oj-button-sm"
            on-oj-action="[[$listeners.buttonAction]]">
          </oj-button>
          <oj-button label="Rest" chroming="callToAction" class="oj-button-sm"
            on-oj-action="[[$listeners.buttonAction2]]">
          </oj-button>
          <oj-bind-if test="[[ $variables.CrewTblADP.data.length > 0 ]]">
            <oj-button label="Export" chroming="callToAction" class="oj-button-sm"
              on-oj-action="[[$listeners.buttonAction3]]"></oj-button>
          </oj-bind-if>
        </oj-toolbar>
        <oj-table scroll-policy="loadMoreOnScroll" display="grid" style="height:70vh"
          columns='{{$variables.columns}}' data="[[ $variables.CrewTblADP ]]">

          <template slot="date">
            <oj-input-date aria-label="Date" value="[[$current.data]]"
              converter='{"type": "datetime", "options": {"pattern":"dd-MM-yyyy"}}' readonly="true"></oj-input-date>
          </template>
        </oj-table>

      </div>


    </div>

  </div>
  <oj-dialog dialog-title="Dialog" id="oj-dialog-1597483294-1">
    <div slot="body">
      <div class="oj-flex"></div>
    </div>
    <div slot="footer">
      <oj-button>Button</oj-button>
    </div>
  </oj-dialog>
  
</oj-sp-welcome-page>